<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <title>Duck on Water, Point and Click</title>
  </head>
  <body>
    <a-scene>
      <!-- Sky -->
      <a-sky color="#87CEEB"></a-sky>

      <!-- Water -->  
      <a-plane 
        color="#1E90FF" 
        height="50" 
        width="50" 
        rotation="-90 0 0" 
        position="0 0 0">
      </a-plane>

      <!-- Ducks -->
      <a-gltf-model 
        id="duck1" 
        src="https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Duck/glTF/Duck.gltf" 
        scale="0.5 0.5 0.5" 
        position="0 0 0" 
        animation__bounce="property: position; to: 0 1.5 0; dur: 500; loop: 5; dir: alternate; startEvents: bounce">
      </a-gltf-model>



      <a-entity rotation="0 0 0" animation="property: rotation; to: 0 360 0; loop: true; dur: 10000">
        <a-gltf-model 
            id="duck2" 
            src ="https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/Duck/glTF/Duck.gltf" 
            scale="0.5 0.5 0.5" 
            position="2 0 0">
        </a-gltf-model>
      </a-entity>

      <!-- Clouds -->
      <a-sphere 
        color="#FFFFFF" 
        radius="2" 
        position="-3 5 -3" 
        scale="1 0.6 1">
      </a-sphere>
      <a-sphere 
        color="#FFFFFF" 
        radius="2" 
        position="3 6 -6" 
        scale="1.2 0.8 1.2">
      </a-sphere>
      <a-sphere 
        color="#FFFFFF" 
        radius="2" 
        position="1 4 -4" 
        scale="1.1 0.7 1.1">
      </a-sphere>
      <a-sphere 
        color="#FFFFFF" 
        radius="2" 
        position="-1 5 -4" 
        scale="1.1 0.7 1.1">
      </a-sphere>

      <a-sphere 
        color="#FFFFFF" 
        radius="2.3" 
        position="-7 9 1" 
        scale="1 0.6 1">
      </a-sphere>
      <a-sphere 
        color="#FFFFFF" 
        radius="2.1" 
        position="-7 7 0" 
        scale="1.2 0.8 1.2">
      </a-sphere>
      <a-sphere 
        color="#FFFFFF" 
        radius="2.5" 
        position="-5 9 1" 
        scale="1.1 0.7 1.1">
      </a-sphere>
      <a-sphere 
        color="#FFFFFF" 
        radius="1.5" 
        position="-7 5 3" 
        scale="1.1 0.7 1.1">
      </a-sphere>

      <!-- 3D Text -->
      <a-text 
        value="Aim the blue circle at each duck and click!" 
        color="#000000" 
        position="5 2 -3" 
        scale="5 5 5">
      </a-text>

      <a-text 
        value="Dylan Tse | RTF 329C" 
        color="#000000" 
        position="5 4 -3" 
        scale="5 5 5">
      </a-text>

      <!-- Camera -->
      <a-entity 
        camera 
        position="0 2 10" 
        look-controls
        wasd-controls="acceleration: 50">
        <a-cursor color="#0000FF" />
      </a-entity>

    </a-scene>

    <script>
      const duck1 = document.querySelector("#duck1");
      const duck2 = document.querySelector("#duck2");

      // Ensure the model is loaded before interacting with it
      duck1.addEventListener("model-loaded", () => {
        const mesh = duck1.getObject3D("mesh");

        // Add event listener to change color and bounce when clicked
        duck1.addEventListener("click", () => {
          // Change material color to green
          mesh.traverse((node) => {
            if (node.isMesh) {
              node.material.color.set("#00FF00");
            }
          });

          // Trigger bounce animation
          duck1.emit("bounce");
        });
      });

      duck2.addEventListener("model-loaded", () => {
        const mesh = duck2.getObject3D("mesh");

        // Add event listener to change color and bounce when clicked
        duck2.addEventListener("click", () => {
          // Change material color to green
          mesh.traverse((node) => {
            if (node.isMesh) {
              node.material.color.set("#FF0000");
            }
          });
        });
      });


    </script>
  </body>
</html>
